<!DOCTYPE html>
<html>

<head>

	<title>Intro</title>
	<script src="https://d3js.org/d3.v5.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link href="style.css" type="text/css" rel="stylesheet">

</head>

<body>
	<span onclick="window.location.href='index.html'" class="navigate left every_page">&#8249;</span>
	<span onclick="window.location.href='childhood.html'" class="navigate right every_page">&#8250;</span>
	
	<div class = "entrance ">
		<svg width="1200" height="600" text-anchor="middle"></svg>
	</div>

	<a class="next continue" href = "childhood.html" style = "position: absolute; text-align: center; margin-top: 450px; opacity: 0.1;">skip &#8250;</a>

</body>

<script type="text/javascript">

$("body").keydown(function(e) {
  if(e.which == 37) { // left     
      $(".left").trigger("click");
  }
  else if(e.which == 39) { // right     
      $(".right").trigger("click");
  }
});

var longLineLength = 1000;
var bottomLineY = 550;
var lifeExpectancy = localStorage.getItem("expectancy");
var country = localStorage.getItem("country");

var svg = d3.select("body").select("svg"), //is this necessary?
	width = +svg.attr("width"),
 	height = +svg.attr("height");;


var text1 = svg.append("text")
	.html("Homo sapiens could exist for <tspan class = 'italics'>at least</tspan> <tspan class='turquoise'>1 MILLION</tspan> years.")
	.attr("x", width/2)
	.attr("y", 180)
	.attr("font-family", "Georgia")
	.attr("font-variant", "small-caps")
	.attr("fill", "#a2999e")
	.attr("font-weight", "bold")
	.attr("font-size", 35)
	.attr("opacity", 0);

var text2 = svg.append("text")
	.html("<tspan class='turquoise'>this is the lifespan of an average mammalian species.</tspan>")
	.attr("x", width/2 + 200) 
	.attr("y", 210)
	.attr("font-family", "Georgia", "sans-serif")
	.attr("font-variant", "small-caps")
	.attr("fill", "#a2999e")
	.attr("font-weight", "bold")
	.attr("font-size", 20)
	.attr("opacity", 0);

var text3 = svg.append("text")
	.text("Let's put this into perspective.")
	.attr("x", width/2)
	.attr("y", 180)
	.attr("font-family", "Georgia")
	.attr("font-variant", "small-caps")
	.attr("fill", "#a2999e")
	.attr("font-weight", "bold")
	.attr("font-size", 35)
	.attr("opacity", 0);

var text4 = svg.append("text")
	.text("What if humanity were one human?")
	.attr("x", width/2)
	.attr("y", 180)
	.attr("font-family", "Georgia")
	.attr("font-variant", "small-caps")
	.attr("fill", "#a2999e")
	.attr("font-weight", "bold")
	.attr("font-size", 35)
	.attr("opacity", 0);
	

//TIMELINE WITH TICKS

var longline = svg.append("line")
    .attr("x1", (width - longLineLength) / 2).attr("y1", 300).attr("x2", (width - longLineLength) / 2 + longLineLength).attr("y2", 300)
    .attr("stroke-width", 2)
    .attr("stroke", "#353b3c");

var tickPosition = [(width - longLineLength) / 2, (width - longLineLength) / 2 + longLineLength, (width - longLineLength) / 2 + longLineLength*0.2];

var ticks = svg.selectAll("ticks")
  .data([0, 1, 2])
  .enter()
  .append("line")
  	.attr("stroke-width", 2)
    .attr("stroke", function(i) {return i == 2 ? "#006d77" : "#353b3c";})
    .attr("opacity", 0)
    .attr("x1", function(d){return tickPosition[d]} ).attr("y1", 280)
    .attr("x2", function(d){return tickPosition[d]} ).attr("y2", 320);


//LABELS

var humanityLabels = ["200K BCE", "800K CE", "2020 CE"]
var humanLabels = ["Birth", Math.round(lifeExpectancy) + " years old", Math.round(lifeExpectancy * 0.2) + " years old"]
var timelineLabels = ["First Homo sapiens", "1M years later", "Today"]

var labels1 = svg.selectAll("labels1") //humanityLabels
  .data([0, 1, 2])
  .enter()
  .append("text")
  	.text(function(d) {return humanityLabels[d]})
  	.attr("x", function(d) {return tickPosition[d]})
  	.attr("y", 340)
  	.attr("font-family", "Trebuchet MS", "Helvetica", "sans-serif")
	.attr("font-variant", "small-caps")
	.attr("font-weight", "bold")
	.attr("font-size", 15)
	.attr("fill", function(i) {return i == 2 ? "#006d77" : "#353b3c";})
  	.attr("opacity", 0);

var labels2 = svg.selectAll("labels2")	//humanLabels
  .data([0, 1, 2])
  .enter()
  .append("text")
  	.text(function(d) {return humanLabels[d]})
  	.attr("x", function(d) {return tickPosition[d]})
  	.attr("y", 340)
  	.attr("font-family", "Trebuchet MS", "Helvetica", "sans-serif")
	.attr("font-variant", "small-caps")
	.attr("font-weight", "bold")
	.attr("font-size", 20)
	.attr("fill", function(i) {return i == 2 ? "#006d77" : "#353b3c";})
  	.attr("opacity", 0);

var labels3 = svg.selectAll("labels3") //timelineLabels
  .data([0, 1, 2])
  .enter()
  .append("text")
  	.text(function(d) {return timelineLabels[d]})
  	.attr("x", function(d) {return tickPosition[d]})
  	.attr("y", 260)
  	.attr("font-family", "Trebuchet MS", "Helvetica", "sans-serif")
	.attr("font-weight", "bold")
	.attr("font-size", 15)
	.attr("fill", function(i) {return i == 2 ? "#006d77" : "#353b3c";})
  	.attr("opacity", 0);

var humanityLabel = svg.append("text")
	.text("humanity")
	.attr("x", width/2)
	.attr("y", 260)
	.attr("font-family", "Trebuchet MS", "Helvetica", "sans-serif")
	.attr("fill", "#c6c7c4")
//	.attr("font-variant", "small-caps")
	.attr("font-style", "italic")
	.attr("font-weight", "bold")
	.attr("font-size", 15)
	.attr("opacity", 0);

var humanInCountryLabel = svg.append("text")
	.text("human in " + country)
	.attr("x", width/2)
	.attr("y", 340)
	.attr("font-family", "Trebuchet MS", "Helvetica", "sans-serif")
	.attr("fill", "#c6c7c4")
	.attr("font-weight", "bold")
//	.attr("font-variant", "small-caps")
	.attr("font-style", "italic")
	.attr("font-size", 15)
	.attr("opacity", 0);

//Humans could exist for... This is the average lifespan...

text1.transition()
	.attr("opacity", 1)
    .duration(1000);

text2.transition()
	.attr("opacity", 1)
    .duration(1000)
    .delay(2000);

text1.transition()
	.attr("opacity", 0)
    .duration(1000)
    .delay(5000);

text2.transition()
	.attr("opacity", 0)
    .duration(1000)
    .delay(5000);

//Let's put this into perspective, build humanity timeline

text3.transition()
    .attr("opacity", 1)
    .duration(1000)
    .delay(6000)
    
text3.transition()
    .attr("opacity", 0)
    .duration(1000)
    .delay(14000);

longline.attr("stroke-dasharray", longLineLength + " " + longLineLength)
	.attr("stroke-dashoffset", longLineLength)
	.transition()
	.duration(2000)
	.delay(9000)
	.ease(d3.easeLinear) //Try linear, quad, bounce... see other examples here - http://bl.ocks.org/hunzy/9929724
	.attr("stroke-dashoffset", 0)
	.style("stroke-width",3);

ticks.transition()
	.attr("opacity", 1)
    .duration(0)
    .delay(function(i){return(8000 + i*3000)});

labels1.transition()
	.attr("opacity", 1)
    .duration(0)
    .delay(function(i){return(8000 + i*3000)});

labels3.transition()
	.attr("opacity", 1)
    .duration(0)
    .delay(function(i){return(8000 + i*3000)});

labels3.transition()
	.attr("opacity", 0)
    .duration(0)
    .delay(function(i){return(9500 + i*3000)});

//What if humanity were one human? build human timeline

text4.transition()
    .attr("opacity", 1)
    .duration(1000)
    .delay(16000);

labels2.transition()
	.attr("opacity", 1)
    .duration(1000)
    .delay(function(i){return(19500 + i*1000)});

labels1.transition()
	.attr("y", 260)
    .duration(1000)
    .delay(17000);

humanityLabel.transition()
    .attr("opacity", 1)
    .duration(1000)
    .delay(17500);

humanInCountryLabel.transition()
    .attr("opacity", 1)
    .duration(1000)
    .delay(19500);

//shrink timeline

humanityLabel.transition()
    .attr("opacity", 0)
    .duration(0)
    .delay(25000);

humanInCountryLabel.transition()
    .attr("opacity", 0)
    .duration(0)
    .delay(25000);

longline.transition()
	.attr("x1", (width - longLineLength) / 2).attr("x2", (width - longLineLength) / 2 + longLineLength*0.2)
	.duration(0)
	.delay(25000);

labels1.transition()
	.attr("opacity", function(i) {return i===1 ? 0:1;})
	.duration(0)
	.delay(25000);

labels2.transition()
	.attr("opacity", function(i) {return i===1 ? 0:1;})
	.duration(0)
	.delay(25000);

ticks.transition()
	.attr("opacity", function(i) {return i===1 ? 0:1;})
	.duration(0)
	.delay(25000);

//expand timeline

longline.transition()
	.attr("x2", (width - longLineLength) / 2 + longLineLength)
	.duration(500)
	.delay(25500);

labels1.transition()
	.attr("x", function(i) {return i===0 ? (width - longLineLength) / 2 : (width - longLineLength) / 2 + longLineLength;})
	.attr("fill", "#353b3c")
	.duration(500)
	.delay(25500);

labels2.transition()
	.attr("x", function(i) {return i===0 ? (width - longLineLength) / 2 : (width - longLineLength) / 2 + longLineLength;})
	.attr("fill", "#353b3c")
	.duration(500)
	.delay(25500);

ticks.transition()
	.attr("stroke", "#353b3c")
	.attr("x1", function(i) {return i===0 ? (width - longLineLength) / 2 : (width - longLineLength) / 2 + longLineLength;})
	.attr("x2", function(i) {return i===0 ? (width - longLineLength) / 2 : (width - longLineLength) / 2 + longLineLength;})
	.duration(500)
	.delay(25500);

//DROP TO BOTTOM OF SCREEN

labels1.transition()
	.attr("opacity", 0)
	.duration(0)
	.delay(26000);

longline.transition()
	.attr("y1", bottomLineY)
	.attr("y2", bottomLineY)
	.duration(1000)
	.delay(26000);

ticks.transition()
	.attr("y1", bottomLineY - 20)
	.attr("y2", bottomLineY + 20)
	.duration(1000)
	.delay(26000);

labels2.transition()
	.attr("y", bottomLineY + 40)
	.duration(1000)
	.delay(26000);

text4.transition()
	.attr("font-size", 18)
	.attr("fill", "#c6c7c4")
	.attr("y", 47)
	.attr("x", 165)
	.attr("font-family", "Georgia", "serif")
	.text("If humanity were one human...")
	.attr("font-variant", "null")
	.ease(d3.easeLinear)
	.duration(1000)
	.delay(26000);


let redirect = function() {
	window.location.href="childhood.html";
}

setTimeout(redirect, 27000);







</script>

</html>