<!DOCTYPE html>
<html>

<head>

	<title>If humanity were one human...</title>
	<script src="https://d3js.org/d3.v5.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link href="style.css" type="text/css" rel="stylesheet">

</head>

<body>
	<div id = "intro">
		<div class = "t1">
			<a class="next close" href = "intro.html">&times;</a>
			<h1 style = "position: relative; text-align: center; top: 50px; left: 20px;" class = "title">Welcome!</h1>
		</div>

		<div class = "questions">
			<div class = "t2">
				<h2>Where do you live?</h2>
				<select id="country">
					<option value="53.25">Afghanistan</option>
					<option value="82.89">Australia</option>
					<option value="74.98">Brazil</option>
					<option value="76.31">China</option>
					<option value="79.5">Denmark</option>
					<option value="70.03">India</option>
					<option value="75.2">Malaysia</option>
					<option value="60.87">Nigeria</option>
					<option value="72.16">Russia</option>
					<option value="81.3" selected>United Kingdom</option>
					<option value="80.43">United States of America</option>
				</select>
			</div>

			<div class = "t3">
				<h2>How optimistic are you about the future of humanity?</h2>
				<div class = "smileys">
					<img src = "face1.png">
					<img src = "face2.png">
					<img src = "face3.png">
					<img src = "face4.png">
					<img src = "face5.png">
				</div>
			</div>
		</div>
		<div class = "t4">
			<a class="next continue" href = "intro.html" style = "position: relative; text-align: center;">continue &#8250;</a>
		</div>
	</div>

	<!-- The Modal -->
	<div id="temporaryModal" class="modal-temp">

	  <!-- Modal content -->
	  <div class="modal-content-temp">
	    <!-- <span class="close">&times;</span> -->
	    <div class="modal-body-temp">

			<p class="p-temp">Hi! Thanks for taking the time to take a look :)</p> 

			<p class="p-temp">The visualization is currently undergoing some cosmetic developments [renovation], so please excuse any bugs!</p>

			<p class="p-temp">Click out to view the current version.</p> 

	 	</div>
	 </div>

</body>

<script type="text/javascript">

//transition in

let box = d3.select("#intro");
let t1 = d3.select("body").selectAll(".t1");
let t2 = d3.select("body").selectAll(".t2");
let t3 = d3.select("body").selectAll(".t3");
let t4 = d3.select("body").selectAll(".t4");

box.style("background-color", "#eef0f2");
t1.attr("class", "transition").style("opacity", 0);
t2.attr("class", "transition").style("opacity", 0);
t3.attr("class", "transition").style("opacity", 0);
t4.attr("class", "transition").style("opacity", 0);

let transitions = d3.selectAll(".transition");


box.transition()
	.style("background-color", "white")
	.ease(d3.easeLinear)
	.duration(200)
	.delay(500);

transitions.transition()
	.style("opacity", 1)
	.ease(d3.easeLinear)
	.duration(200)
	.delay((d, i) => 500 + 200*i);

//cursor on clickable items

d3.select("#country").on("mouseover", function(){
    d3.select(this).style("cursor", "pointer");
});

d3.select(".smileys").selectAll("img").on("mouseover", function(){
    d3.select(this).style("cursor", "pointer");
});

//change opacity of smiley when clicked

d3.select(".smileys").selectAll("img").on("click", function(){
    d3.select(".smileys").selectAll("img").attr("class", "null"); //unclicks all the other smileys 
    d3.select(this).attr("class", "selected");
});

//-----------------uncertainty modal-----------------

// Get the modal
var modal = document.getElementById("temporaryModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}


//store selected country and its life expectancy in local storage 

var chooseCountry = function() {
	localStorage.setItem("country", document.getElementById("country").options[document.getElementById("country").selectedIndex].text);
	localStorage.setItem("expectancy", document.getElementById("country").options[document.getElementById("country").selectedIndex].value);
}

document.getElementById("country").addEventListener("change", chooseCountry);


</script>

</html>